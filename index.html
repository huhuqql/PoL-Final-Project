<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <script src="lib/codemirror.js"></script>
    <link rel="stylesheet" href="lib/codemirror.css">
    <link rel="stylesheet" href="theme/night.css">
    <link rel="stylesheet" href="addon/scroll/simplescrollbars.css">
    <script src="addon/scroll/simplescrollbars.js"></script>
    <script src="js/csvToArray.v2.1.js"></script>
    <script src="mode/javascript/javascript.js"></script>
    <script src="data.js"></script>
    <style>
    </style>


    <title>P5.js Tutorial</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">


    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.knob.js"></script>
    <script src="js/jquery.throttle.js"></script>

    <script src="js/popper.min.js"></script>

    <script type="text/javascript">
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })

    </script>
</head>

<body class="bg-dark">

    <div>
        <nav class="navbar navbar-dark bg-black">
            <!-- Navbar content -->
            <a class="navbar-brand" href="#">Practices</a>
        </nav>

        <div class="container-fluid">
            <div style="margin-top:15px;" class="row">


                <div class="col-sm">
                    <div style="height:62%">
                        <div style="background-color:#FFFEF6;height:100%;padding:0px;" class="container-fluid">
                            <div style="text-align:center;padding:10px;background-color:#FFF6D3">
                                <h5 style="font-family: Oxygen">Instruction</h5>
                            </div>
                            <div style="padding-left:10px;padding-right:10px;padding-top:10px;">
                                <p style="font-size:25px;font-weight:500;" id="section"></p>
                            </div>
                            <div style="padding-left:10px;padding-right:10px;">
                                <p style="font-size:17px;" id="instruction"></p>
                            </div>
                            <div id="codebox" style="padding:10px;margin-top:10px;margin-bottom:10px;margin-left:20px;margin-right:20px;">
                                <p id="code_segment"></p>
                            </div>
                            <div id="taskbox" style="padding:10px;padding-left:20px;margin-top:20px;">
                                <p id="task"></p>
                            </div>


                        </div>
                    </div>
                    <div style="margin-top:10px;height:31%">
                        <div style="background-color:#F1F8FF;height:100%;padding:0px;" class="container-fluid">
                            <div style="text-align:center;padding:10px;background-color:#D7EEFD">
                                <h5 style="font-family: Oxygen">Hint</h5>
                            </div>
                            <div style="padding:10px;">
                                <p style="font-size:17px;" id="hint"> </p>
                            </div>
                        </div>
                    </div>
                    <div class="container-fluid">
                        <div style="margin-top:10px;" class="row">
                            <div style="padding-left:0" class="col">
                                <button id="backButton" style="float:left" type="button" class="btn btn-dark" onclick="back()">Back</button>
                            </div>
                            <div style="text-align:center" class="col">
                                <button id="hintButton" type="button" class="btn btn-dark" onclick="showHint()">Hint</button>
                            </div>
                            <div style="padding-right:0" class="col">
                                <button id="nextButton" style="float:right" type="button" class="btn btn-dark" onclick="next()">Next</button>
                            </div>
                        </div>
                    </div>
                </div>




                <div class="col-sm">
                    <textarea name="sourceCode" id="sourceCode">
<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>

<meta charset="utf-8" />
								
</head>
<body>
<script>

    function setup() {
        createCanvas(document.body.clientWidth, document.documentElement.clientHeight - 20);

    }

    function draw() {
        background(0);

    }

</script>
</body>
</html>
						
</textarea>

                    <div class="container-fluid">
                        <div style="margin-top:12px;" class="row">
                            <div style="text-align:center" class="col">
                                <button style="width:100px;" type="button" class="btn btn-secondary" onclick="runCode();">Run</button>
                            </div>
                        </div>
                    </div>

                </div>

                <div id="canvas" class="col-sm">
                    <iframe style="height:100%;width:100%;padding:0;margin:0;" name="targetCode" id="targetCode"> </iframe>
                </div>
            </div>

        </div>

    </div>


    <textarea style="display:none" name="reset" id="reset">
<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>

<meta charset="utf-8" />
								
</head>
<body>
<script>

    function setup() {
        createCanvas(document.body.clientWidth, document.documentElement.clientHeight - 20);

    }

    function draw() {
        background(0);

    }

</script>
</body>
</html>
                                
</textarea>

    <textarea style="display:none" name="motion1" id="motion1">

<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>

<meta charset="utf-8" />
								
</head>
<body>
<script>

    // define the position of the circle
    var x;
    var y;

    function setup() {
        createCanvas(document.body.clientWidth, document.documentElement.clientHeight - 20);
        x = width / 2;
        y = height - 10;
    }

    function draw() {
        background(200);

        // Draw a circle
        fill(100);
        ellipse(x, y, 50, 50);
        x = x;
        y = y;

        // Reset to the bottom
        if (y < 0) {
            y = height;
        }
    }

</script>
</body>
</html>

    
</textarea>

    <textarea style="display:none" name="shape1" id="shape1">

<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>

<meta charset="utf-8" />
								
</head>
<body>
<script>

    function setup() {
        createCanvas(document.body.clientWidth, document.documentElement.clientHeight - 20);

    }

    function draw() {
        background(0);

        rect(100,100,100,100);
    }

</script>
</body>
</html>

    
</textarea>


    <textarea style="display:none" name="interaction1" id="interaction1">

<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>

<meta charset="utf-8" />
								
</head>
<body>
<script>   

    var x;
    var y;
    var r;
  
    function setup() {
        createCanvas(document.body.clientWidth, document.documentElement.clientHeight - 20);
	    x = width/2;
	    y = height/2;
	    r = 50;
    }

    function draw() {
        background(0);
		fill(200,0,0);
          ellipse(x,y,r,r);
          
      if(false){
      	x += random(-1, 1);
    	y += random(-1, 1);
      }
    }

</script>
</body>
</html>

    
</textarea>


    <textarea style="display:none" name="follow1" id="follow1">

<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>

<meta charset="utf-8" />
								
</head>
<body>
<script>   

var x = 100;
var y = 100;
var angle1 = 0.0;
var segLength = 50;


function setup() {
  createCanvas(document.body.clientWidth, document.documentElement.clientHeight - 20);
  strokeWeight(20);
  stroke(color(250,60,60));
}

function draw() {
  background(0);
  dx = mouseX - x;
  dy = mouseY - y;
  angle1 = atan2(dy, dx);
  x = mouseX - (cos(angle1) * segLength);
  y = mouseY - (sin(angle1) * segLength);
  segment(x, y, angle1);
}

function segment(x, y, a) {
  push();
  line(0, 0, segLength, 0);
  pop();
}

</script>
</body>
</html>

    
</textarea>

</body>

<!-- <script type="text/javascript">
    var csvfile;
</script> -->



<script>
    var question = 0;
    var hint_time = 0;

    var codebox;
    var code_segment;
    var task;

    var instruction;
    var hint;

    window.onload = function () {
        section = document.getElementById("section");
        instruction = document.getElementById("instruction");
        hint = document.getElementById("hint");
        codebox = document.getElementById("codebox");
        code_segment = document.getElementById("code_segment");
        task = document.getElementById("task");
    }

    function next() {
        hint_time = 0;
        question++;
        section.innerHTML = csvfile[question].page;
        instruction.innerHTML = csvfile[question].description;
        if (csvfile[question].code != "") {
            codebox.style.backgroundColor = "#cccccc";
            code_segment.innerHTML = csvfile[question].code;
        }
        else {
            codebox.style.backgroundColor = "#FFFEF6";
            code_segment.innerHTML = "";
        }
        if (csvfile[question].task != "") {
            taskbox.style.backgroundColor = "#f9df89";
            task.innerHTML = csvfile[question].task;
        }
        else {
            taskbox.style.backgroundColor = "#FFFEF6";
            task.innerHTML = "";
        }
        hint.innerHTML = "";
        if (checkComplete() == false) {
            document.getElementById("nextButton").disabled = true;
            document.getElementById("nextButton").className = "btn btn-dark";
        }
        else{
            document.getElementById("nextButton").disabled = false;
            document.getElementById("nextButton").className = "btn btn-success";
        }
        if (csvfile[question].reset != "") {
            CodeMirrorEditor.setValue(document.getElementById(csvfile[question].reset).value);
            runCode();
        }
    }

    function back() {
        document.getElementById("nextButton").disabled = false;
        hint_time = 0;
        question--;
        section.innerHTML = csvfile[question].page;
        instruction.innerHTML = csvfile[question].description;
        if (csvfile[question].code != "") {
            codebox.style.backgroundColor = "#cccccc";
            code_segment.innerHTML = csvfile[question].code;
        }
        else {
            codebox.style.backgroundColor = "#FFFEF6";
            code_segment.innerHTML = "";
        }
        if (csvfile[question].task != "") {
            taskbox.style.backgroundColor = "#f9df89";
            task.innerHTML = csvfile[question].task;
        }
        else {
            taskbox.style.backgroundColor = "#FFFEF6"
            task.innerHTML = "";
        }
        hint.innerHTML = "";
    }


    function showHint() {
        //console.log(hint.innerHTML = csvfile[question].hint_1);
        if (hint_time == 0) {
            hint.innerHTML = csvfile[question].hint_1;
            hint_time++;
        }
        else {
            hint.innerHTML = csvfile[question].hint_2;
        }
    }

    function checkComplete() {
        if (csvfile[question].answer_1 == "") {
            return true;
        }
        else {
            var tempcontent = CodeMirrorEditor.getValue().replace(/[ ]/g, "");

            if (tempcontent.indexOf(csvfile[question].answer_1) > 0) {
                return true;
            }
            else {
                var intendedFunction = csvfile[question].answer_1.substring(0, csvfile[question].answer_1.indexOf("("));
                var start = tempcontent.indexOf(intendedFunction);
                var end;
                if (start > 0) {
                    end = start + tempcontent.substring(start, tempcontent.length - 1).indexOf(";");
                    var result = tempcontent.substring(start, end).replace(/[ ]/g, "");
                    result = result.substring(result.indexOf("(") + 1, result.indexOf(")"));
                    var answer = csvfile[question].answer_1.substring(csvfile[question].answer_1.indexOf("(") + 1, csvfile[question].answer_1.indexOf(")"));
                    var answer_parameters = answer.split(",");
                    console.log(answer_parameters);
                    var parameters = result.split(",");
                    console.log(parameters);
                    for (var i = 0; i < parameters.length; i++) {
                        if (answer_parameters[i] != parameters[i]) {
                            var s = tempcontent.indexOf("var" + parameters[i]);
                            if (s > 0) {
                                console.log(s);
                                var e = s + tempcontent.substring(s, tempcontent.length - 1).indexOf(";");
                                var temp_parameter = tempcontent.substring(s, e);
                                temp_parameter = temp_parameter.substring(temp_parameter.indexOf("=") + 1, temp_parameter.length);
                                if (temp_parameter != answer_parameters[i]) {
                                    return false;
                                }
                            }
                            else {
                                return false;
                            }
                        }
                    }
                    return true;
                }
            }
            return false;
        }
    }

</script>



<script>
    var iframeHeight = window.screen.height;
    var windowHeight = document.body.clientHeight;
    var myTextarea = document.getElementById('sourceCode');
    var content;
    var CodeMirrorEditor = CodeMirror.fromTextArea(myTextarea, {
        mode: "text/javascript",
        theme: "night",
        lineNumbers: true,
        styleActiveLine: true,
        matchBrackets: true,
        scrollbarStyle: "overlay"
    });
    CodeMirrorEditor.setSize((document.documentElement.clientWidth) / 3, document.documentElement.clientHeight - 150);
    function runCode() {
        //console.log(document.getElementById('motion1').value);
        // CodeMirrorEditor.setValue(document.getElementById('motion1').value);
        // console.log(CodeMirrorEditor.getValue());
        CodeMirrorEditor.clearHistory();

        content = CodeMirrorEditor.getValue();
        var iframe = document.getElementById('targetCode');
        iframe = (iframe.contentWindow) ? iframe.contentWindow : (iframe.contentDocument) ? iframe.contentDocument.document :
            iframe.contentDocument;
        //iframe.height = window.screen.height;
        iframe.document.open();
        iframe.document.write("");
        iframe.document.write(content);
        iframe.document.close();
        if (checkComplete() == true) {
            document.getElementById("nextButton").disabled = false;
            document.getElementById("nextButton").className = "btn btn-success";
        }
        else {
            // if (csvfile[question].feedback != "") {
            //     hint.innerHTML = csvfile[question].feedback;
            // }
        }
        return false;
    }
    runCode();

</script>



<!-- Bootstrap core JavaScript
    ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="js/bootstrap.min.js"></script>




</html>