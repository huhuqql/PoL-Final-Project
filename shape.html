<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <script src="lib/codemirror.js"></script>
    <link rel="stylesheet" href="lib/codemirror.css">
    <link rel="stylesheet" href="theme/night.css">
    <link rel="stylesheet" href="addon/scroll/simplescrollbars.css">
    <script src="addon/scroll/simplescrollbars.js"></script>
    <script src="js/csvToArray.v2.1.min.js"></script>
    <script src="mode/javascript/javascript.js"></script>
    <style>

    </style>


    <title>Shape</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.css" rel="stylesheet">


    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.knob.js"></script>
    <script src="js/jquery.throttle.js"></script>

    <script src="js/popper.min.js"></script>

    <script type="text/javascript">
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
</head>

<body class="bg-dark">

    <div>
        <nav class="navbar navbar-dark bg-black">
            <!-- Navbar content -->
            <a class="navbar-brand" href="#">Practices</a>
        </nav>

        <div class="container-fluid">
            <div style="margin-top:15px;" class="row">


                <div class="col-sm">
                    <div style="height:62%">
                            <div style="background-color:#FFFEF6;height:100%;padding:0px;" class="container-fluid">
                                <div style="text-align:center;padding:10px;background-color:#FFF6D3">
                                    <h5 style="font-family: Oxygen">Instruction</h5>
                                </div>
                                <div style="padding:10px;">
                                    <p style="font-size:20;" id="instruction"></p>
                                </div>
                                <div id="codebox" style="padding:10px">
                                    <p id="code_segment"></p>
                                </div>
                                <div style="padding:10px;">
                                    <p id="task"></p>
                                </div>

                                    
                            </div>
                    </div>
                    <div style="margin-top:10px;height:31%">
                            <div style="background-color:#F1F8FF;height:100%;padding:0px;" class="container-fluid">
                                    <div style="text-align:center;padding:10px;background-color:#D7EEFD">
                                            <h5 style="font-family: Oxygen">Hint</h5>
                                    </div>
                                    <div style="padding:10px;">
                                        <p id="hint"> </p>
                                    </div>
                            </div>
                    </div>
                    <div class="container-fluid">
                            <div style="margin-top:10px;" class="row">
                              <div style="padding-left:0" class="col">
                                    <button id="backButton" style="float:left" type="button" class="btn btn-dark" onclick="back()">Back</button>       
                              </div>
                              <div style="text-align:center" class="col">
                                    <button type="button" class="btn btn-dark" onclick="showHint()">Hint</button>  
                              </div>
                              <div style="padding-right:0" class="col">
                                    <button id="nextButton" style="float:right" type="button" class="btn btn-dark" onclick="next()">Next</button>       
                              </div>
                            </div>
                    </div>
                </div>


                

                <div class="col-sm">
                    <textarea name="sourceCode" id="sourceCode">
<!DOCTYPE html>
<html>
  <head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.6.0/addons/p5.dom.min.js"></script>

  <meta charset="utf-8" />
								
  </head>
  <body>
	<script>

function setup() {
    createCanvas(document.body.clientWidth, document.documentElement.clientHeight - 20);

}

function draw() {
    background(0);

}


    </script>
  </body>
</html>
						
</textarea>
<!-- <div class="container-fluid">
        <row>
                <div class="col-sm">
                    <button  type="button" class="btn btn-dark">Back</button>
                </div>>
                <div class="col-sm">
                        <button  type="button" class="btn btn-secondary" onclick="runCode();">Run</button>
                        <button type="button" class="btn btn-secondary">Hint</button>        
                </div>>
            
                <div class="col-sm">
                    <button  type="button" class="btn btn-dark">Next</button>    
                </div>
            
            </row>

</div> -->
<div class="container-fluid">
        <div style="margin-top:12px;" class="row">
          <div style="text-align:center" class="col">
                <button style="width:100px;" type="button" class="btn btn-secondary" onclick="runCode();">Run</button>
          </div>
        </div>
      </div>

                </div>

                <div id="canvas" class="col-sm">
                    <iframe style="height:100%;width:100%;padding:0;margin:0;" name="targetCode" id="targetCode"> </iframe>
                </div>
            </div>

        </div>

    </div>

</body>

<script type="text/javascript">
    var csvfile;
    function readCsvFile() {
        $.ajax({
            url: "tasks.csv",
            dataType: 'text',
            cache: false
        }).done(function (csvAsString) {
            csvfile = csvAsString.csvToArray();
            console.log(csvfile);
        });
    }
</script>



<script>
    readCsvFile();
    var question = 0;
    var hint_time = 0;

    var codebox;
    var code_segment;
    var task;

    var instruction;
    var hint;

    window.onload = function () {
        instruction = document.getElementById("instruction");
        hint = document.getElementById("hint");
        codebox = document.getElementById("codebox");
        code_segment = document.getElementById("code_segment");
        task = document.getElementById("task");
    }

    function next(){
        hint_time = 0;
        question++;
        instruction.innerHTML = csvfile[question][2];
        if(csvfile[question][4] != ""){
            codebox.style.backgroundColor = "#D7EEFD";
            code_segment.innerHTML = csvfile[question][4];
        }
        else{
            codebox.style.backgroundColor = "#FFFEF6";
            code_segment.innerHTML = "";
        }
        if(csvfile[question][3] != ""){
            task.innerHTML = csvfile[question][3];
        }
        else{
            task.innerHTML = "";
        }
        hint.innerHTML = "";
        document.getElementById("nextButton").disabled=true;
    }

    function back(){
        hint_time = 0;
        question--;
        instruction.innerHTML = csvfile[question][2];
        if(csvfile[question][4] != ""){
            codebox.style.backgroundColor = "#D7EEFD";
            code_segment.innerHTML = csvfile[question][4];
        }
        else{
            codebox.style.backgroundColor = "#FFFEF6";
            code_segment.innerHTML = "";
        }
        if(csvfile[question][3] != ""){
            task.innerHTML = csvfile[question][3];
        }
        else{
            task.innerHTML = "";
        }
        hint.innerHTML = "";
    }

    function showHint(){
        console.log(hint.innerHTML = csvfile[question][5]);
        if(hint_time == 0){
            hint.innerHTML = csvfile[question][5];
            hint_time++;
        }
        else{
            hint.innerHTML = csvfile[question][6];         
        }
    }

    function checkComplete(){
        if(csvfile[question][3] == ""){
            
        }
    }

</script>



<script>
    var iframeHeight = window.screen.height;
    var windowHeight = document.body.clientHeight;
    var myTextarea = document.getElementById('sourceCode');
    var content;
    var CodeMirrorEditor = CodeMirror.fromTextArea(myTextarea, {
        mode: "text/javascript",
        theme: "night",
        lineNumbers: true,
        styleActiveLine: true,
        matchBrackets: true,
        scrollbarStyle: "overlay"
    });
    CodeMirrorEditor.setSize("auto", document.documentElement.clientHeight - 150);
    function runCode() {
        content = CodeMirrorEditor.getValue();
        //console.log(content);
        // console.log(CodeMirrorEditor.getValue());

        var iframe = document.getElementById('targetCode');
        iframe = (iframe.contentWindow) ? iframe.contentWindow : (iframe.contentDocument) ? iframe.contentDocument.document :
            iframe.contentDocument;
        //iframe.height = window.screen.height;
        iframe.document.open();
        iframe.document.write(content);
        iframe.document.close();

        return false;
    }
    runCode();

</script>



<!-- Bootstrap core JavaScript
    ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="js/bootstrap.min.js"></script>

<!-- Icons -->
<script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
<script>
    feather.replace()

</script>

</body>

</html>